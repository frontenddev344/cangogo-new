var ostrovokConfig=ostrovokConfig||{};var ostrovokLibraries=ostrovokLibraries||{};var etgConfig=etgConfig||ostrovokConfig||{};var etgLibraries=etgLibraries||ostrovokLibraries||{};(function(){var jQuery;var moment;const rootScript=document.currentScript;const head=document.getElementsByTagName('head')[0]||document.head;const etgwidget={date_2txt:'',date_1txt:'',guests:{guestsAll:'2 гостей',guestAdult:2,guestChildrenAll:0,guestChild0:0,guestChild1:0,guestChild2:0,guestChild3:0},div_width:0,host:"https://cpa.zenhotels.com",short_month:true,hash:"207fe6445aac47c49a727998ea16f6ef",buttonCSS:'',formCSS:'',containerCSS:'display:none;',margin:5};const PARTNERS={'adv-cake':{'deeplink_location':'query','hostname':'go.acstat.com','parameter_name':'dl'},'cityads':{'deeplink_location':'query','hostname':'pwieu.com','parameter_name':'url'},'admitad':{'deeplink_location':'query','hostname':'ad.admitad.com','parameter_name':'ulp','hotel_redirect_url_prefix':'go/cpan/'},'aflink':{'deeplink_location':'query','hostname':'aflink.ru','parameter_name':'ulp','hotel_redirect_url_prefix':'go/cpan/',},'gdeslon':{'deeplink_location':'query','hostname':'f.gdeslon.ru','parameter_name':'goto'},'actionpay':{'deeplink_location':'path','hostname':'apyecom.com','deeplink_path':'/url=','path_regex':"\/url=(.*?)$"},'tp.media':{'deeplink_location':'query','hostname':'tp.media','parameter_name':'u'}}
var etgConfig={region_id:"",region_name:"",lang:"en",brand:"zenhotels",checkin:"",checkout:"",deeplink:"",color:"#ffffff",text_color:"#000000",button_color:"#f56f6b",button_text_color:"#ffffff",width:"100%",margin:true,logo_color:"blue",logo:true};if(window.etgConfig[etgwidget.hash]){Object.keys(window.etgConfig[etgwidget.hash]).forEach(function(key){etgConfig[key]=window.etgConfig[etgwidget.hash][key];});}
Object.keys(etgConfig).forEach(function(key){const scriptAttr=rootScript.getAttribute("data-"+key);if(scriptAttr){etgConfig[key]=scriptAttr;}});if(!window.etgLibraries.css){const css_style=document.createElement('link');css_style.setAttribute('rel','stylesheet');css_style.setAttribute('type','text/css');css_style.setAttribute('href',etgwidget.host+'/static/widget/style1.css?v=2');head.appendChild(css_style);window.etgLibraries.css=true;}
const text_template={ru:{destination:'Направление',regions:'Регионы',hotels:'Отели',input:'Город, отель или аэропорт',checkin:'Заезд',checkout:'Выезд',room_for:'1 номер для',search:'Найти',adults:'Взрослые',children:'Дети',child_age:'Возраст детей на',ready:'Готово',guest:'гостя',guests:'гостей',logo_text:'Поиск и бронирование отелей'},default:{destination:'Destination',regions:'Regions',hotels:'Hotels',input:'City, hotel or airport',checkin:'Check-in',checkout:'Check-out',room_for:'1 room for',search:'Search',adults:'Adults',children:'Children',child_age:'Age of each child on',ready:'Done',guest:'guest',guests:'guests',logo_text:''},ar:{destination:'الوجهة',regions:'المناطق',hotels:'الفنادق',input:'المدينة أو الفندق أو المطار',checkin:'تسجيل الوصول',checkout:'إنهاء إجراءات المغادرة',room_for:'1 غرفة',search:'بحث',adults:'الكبار',children:'الأطفال',child_age:'سن كل طفل',ready:'تم',guest:'ضيف',guests:'الضيوف',logo_text:''},bg:{destination:'Дестинация',regions:'Местоположение',hotels:'Хотел',input:'Град, хотел или летище',checkin:'Регистрация',checkout:'Напускане',room_for:'1 стая за',search:'Търсене',adults:'Възрастен',children:'Дете',child_age:'Възраст на всяко дете',ready:'Направя',guest:'гост',guests:'гостенин',logo_text:''},cs:{destination:'Destinace',regions:'Region',hotels:'Hotel',input:'Město, hotel nebo letiště',checkin:'Přihlásit',checkout:'Prohlédnout',room_for:'1 pokoj pro',search:'Vyhledávání',adults:'Dospělí',children:'Dítě',child_age:'Věk každého dítěte na',ready:'Být',guest:'host',guests:'si',logo_text:''},de:{destination:'Ziel',regions:'Regionen',hotels:'Hotels',input:'Stadt, Hotel oder Flughafen',checkin:'Anreise',checkout:'Abreise',room_for:'1 Zimmer für',search:'Suchen',adults:'Erwachsene',children:'Kinder',child_age:'Alter der Kinder am',ready:'Fertig',guest:'Gast',guests:'Gäste',logo_text:''},el:{destination:'Προορισμός',regions:'Περιοχή',hotels:'Ξενοδοχείο',input:'Πόλη, ξενοδοχείο ή αερολιμένας',checkin:'Check-in',checkout:'Ανάληψη',room_for:'1 δωμάτιο για',search:'Αναζήτηση',adults:'Ενήλικες',children:'Παιδί',child_age:'Ηλικία κάθε παιδιού',ready:'Γίνεται',guest:'επισκέπτης',guests:'επισκέπτης',logo_text:''},es:{destination:'Destino',regions:'Regiones',hotels:'Hoteles',input:'Ciudad, hotel o aeropuerto',checkin:'Check-in',checkout:'Check-out',room_for:'1 habitación',search:'Buscar',adults:'Adultos',children:'Niños',child_age:'Edad de los niños al',ready:'Listo',guest:'huésped',guests:'huésp.',logo_text:''},hu:{destination:'Rendeltetési hely',regions:'Régiók',hotels:'Szállodák',input:'Város, szálloda vagy repülőtér',checkin:'Bejelentkezés',checkout:'Kijelentkezés',room_for:'1 szoba',search:'Keresés',adults:'Felnőttek',children:'Gyermekek',child_age:'Minden gyermek életkora',ready:'Kész',guest:'vendég',guests:'vendégek',logo_text:''},it:{destination:'Destinazione',regions:'Regione',hotels:'Hotel',input:'Città, hotel o aeroporto',checkin:'Check-in',checkout:'Partenza',room_for:'1 camera per',search:'Ricerca',adults:'Adulto',children:'Bambino',child_age:'Età di ogni bambino su',ready:'Fatto',guest:'ospite',guests:'guests',logo_text:''},pl:{destination:'Miejsce przeznaczenia',regions:'Regiony',hotels:'Hotele',input:'Miasto, hotel lub lotnisko',checkin:'Zameldowanie',checkout:'Wymeldowanie',room_for:'1 pokój dla',search:'Szukaj',adults:'Dorośli',children:'Dzieci',child_age:'Wiek każdego dziecka Na',ready:'Zrobione',guest:'gość',guests:'goście',logo_text:''},pt:{destination:'Destino',regions:'Regiao',hotels:'Hotel',input:'Cidade, hotel ou aeroporto',checkin:'Verificar',checkout:'Conferir',room_for:'1 quarto para',search:'Pesquisa',adults:'Adulto',children:'Filhos',child_age:'Idade de cada criança em',ready:'Terminar',guest:'convidado',guests:'hospede',logo_text:''},ro:{destination:'Destinație',regions:'Regiuni',hotels:'Hoteluri',input:'Oraș, hotel sau aeroport',checkin:'Check-in',checkout:'Check-out',room_for:'1 cameră pentru',search:'Caută',adults:'Adulți',children:'Copii',child_age:'Vârsta fiecărui copil pe',ready:'Terminat',guest:'oaspete',guests:'oaspeți',logo_text:''},sq:{destination:'Destinacioni',regions:'Rajonet',hotels:'Hotele',input:'Qytet, hotel apo aeroport',checkin:'Check-in',checkout:'Check-out',room_for:'1 dhomë për',search:'Kërko',adults:'Të rriturit',children:'Fëmijët',child_age:'Moshën e secilit fëmijë në',ready:'Bërë',guest:'mysafir',guests:'të ftuar',logo_text:''},sr:{destination:'Одредиште',regions:'Региони',hotels:'Хотели',input:'Град, хотел или аеродром',checkin:'Регистрација',checkout:'Одјава',room_for:'1 соба за',search:'Претрага',adults:'Одрасли',children:'Деца',child_age:'Старост сваког детета',ready:'Завршено',guest:'гост',guests:'гости',logo_text:''},tr:{destination:'Hedef',regions:'Bölgeler',hotels:'Otelcilikler',input:'Şehir, otel veya havaalanı',checkin:'Giriş yapmak',checkout:'Kontrol etmek',room_for:'1 oda için',search:'Aramak',adults:'Yetişkinler',children:'Çocuklar',child_age:'Her çocuğun yaşı',ready:'Yapılı',guest:'misafir',guests:'konuklar',logo_text:''},zh:{destination:'目的地',regions:'地区',hotels:'酒店',input:'城市，酒店或机场',checkin:'办理入住手续',checkout:'退房',room_for:'1间客房',search:'搜索',adults:'成人',children:'儿童',child_age:'每个孩子的年龄',ready:'完成',guest:'客人',guests:'客人',logo_text:''},};var selected_lang_template=text_template[etgConfig.lang];if(!selected_lang_template){selected_lang_template=text_template.default;}
etgwidget.selected_lang_template=selected_lang_template;const suggestTemplate={ru:{names:['Москва, Россия','Санкт-Петербург, Россия','Большой Сочи, Россия','Севастополь, Россия','Анапа, Россия','Ялта, Россия','Адлер, Россия','Римини, Италия'],ids:['2395','2042','6084686','6023788','258','180352','299','3010']},en:{names:['New York, United States of America','London, United Kingdom','Berlin, Germany','Barcelona, Spain','Paris, France','Rome, Italy','Prague, Czech Republic','Bangkok, Thailand'],ids:['2621','2114','536','513','2734','3023','2872','604']},de:{names:['New York, USA','London, Großbritannien','Berlin, Deutschland','Barcelona, Spanien','Paris, Frankreich','Rom, Italien','Prag, Tschechische Republik','Bangkok, Thailand'],ids:['2621','2114','536','513','2734','3023','2872','604']},es:{names:['New York, United States of America','London, United Kingdom','Berlin, Germany','Barcelona, Spain','Paris, France','Rome, Italy','Prague, Czech Republic','Bangkok, Thailand'],ids:['2621','2114','536','513','2734','3023','2872','604']}};var selSugTemplate=suggestTemplate[etgConfig.lang];if(!selSugTemplate){selSugTemplate=suggestTemplate.en;}
var html_template=[];html_template.push('<div class="zen-tabs">','<div class="zen-tabs-body">','<div class="zen-tabs-logo">','<div class="zen-tabs-logo-image"></div>','<div class="zen-logo-text">',selected_lang_template.logo_text,'</div>','</div>',' <div class="zen-homepage-searchform">','<div class="zen-homepage-searchform-primary">','<div class="zen-homepage-searchform-destination">','<div class="zen-destination ">',' <div class="zen-destination-field">','<div class="zen-destination-label">',selected_lang_template.destination,'</div>','<div class="zen-destination-input-wrapper">','<input autocomplete="off" autocorrect="off" placeholder="',selected_lang_template.input,'" spellcheck="false" tabindex="1" class="zen-destination-input" role="combobox" aria-autocomplete="list">','</div>','</div>','</div>','</div>','<div class="zen-homepage-searchform-fractions">','<div class="zen-homepage-searchform-criteria">','<div class="zen-homepage-searchform-dates">','<div class="zen-daterange ">','<div class="zen-daterange-from">','<div class="zen-daterange-date zen-daterange-date-is-from">','<div class="zen-daterange-date-label">',selected_lang_template.checkin,'</div>','<div class="zen-daterange-date-value">24 фев</div>','</div>','</div>','<div class="zen-daterange-to">','<div class="zen-daterange-date zen-daterange-date-is-to zen-daterange-date zen-daterange-date-is-to">','<div class="zen-daterange-date-label">',selected_lang_template.checkout,'</div>','<div class="zen-daterange-date-value">25 фев</div>','</div>','</div>','</div>','</div>','<div class="zen-homepage-searchform-guests">','<div class="zen-guestsbutton">','<div class="zen-guestsbutton-control">','<div class="zen-guestsbutton-button ">','<div class="zen-guestsbutton-button-rooms">',selected_lang_template.room_for,'</div>','<div class="zen-guestsbutton-button-guests">2 ',selected_lang_template.guests,'</div>','</div>','</div>','</div>','</div>','</div>','<div class="zen-homepage-searchform-submit-wrapper">','<div class="zen-homepage-searchform-submit">','<button class="zen-homepage-searchform-submit-button" type="submit">',selected_lang_template.search,'</button>','</div>','</div>','</div>','</div>','<div class="zen-homepage-searchform-submit-wrapper"></div>','</div>','</div>','</div>');var popupTemplate=[];popupTemplate.push('<div class="guestsbutton-popup-template" style="display: none;">','<div class="zen-guestsbutton-popup">','<div class="zen-guests">','<div class="zen-guests-rooms ">','<div class="zen-guests-room-wrapper ">','<div class="zen-guest-room">','<div class="zen-guests-room-wrapper zen-guests-room-group">','<div class="zen-guests-room-counter">','1<sup class="zen-guests-room-counter-small">ая </sup> комната','</div>','<div class="zen-guests-room">','<div class="zen-guests-room-field">','<div class="zen-guests-room-adults">','<div class="zen-guests-room-title">',selected_lang_template.adults,'</div>','<div class="zen-guests-control">','<div class="zen-select ">','<div class="zen-select-label">2</div>','<div class="zen-select-arrow"></div>','<div class="zen-select-button">','<select class="zen-select-native">','<option value="1">1</option>','<option value="2" selected="selected">2</option>','<option value="3">3</option>','<option value="4">4</option>','<option value="5">5</option>','<option value="6">6</option>','</select>','</div>','</div>','</div>','</div>','<div class="zen-guests-room-children">','<div class="zen-guests-room-title">',selected_lang_template.children,'</div>','<div class="zen-guests-control">','<div class="zen-select ">','<div class="zen-select-label">0</div>','<div class="zen-select-arrow"></div>','<div class="zen-select-button">','<select class="zen-select-native">','<option value="0" selected="selected">0</option>','<option value="1">1</option>','<option value="2">2</option>','<option value="3">3</option>','<option value="4">4</option>','</select>','</div>','</div>','</div>','</div>','</div>','</div>','</div>','</div>','</div>','</div>','<div class="zen-guests-close-button-wrapper ">','<button class="zen-guests-close-button" type="button">',selected_lang_template.ready,'</button>','</div>','</div>','</div>','<div class="zen-guests-ages">','<div class="zen-guests-ages-title" id="ages">',selected_lang_template.child_age,'</div>','<div class="zen-guests-room-field">','<div class="zen-guests-age">','<div class="zen-guests-room-control">','<div class="zen-select ">','<div class="zen-select-label">0</div>','<div class="zen-select-arrow"></div>','<div class="zen-select-button">','<select class="zen-select-native">','<option value="0" selected="selected">0</option>','<option value="1">1</option>','<option value="2">2</option>','<option value="3">3</option>','<option value="4">4</option>','<option value="5">5</option>','<option value="6">6</option>','<option value="7">7</option>','<option value="8">8</option>','<option value="9">9</option>','<option value="10">10</option>','<option value="11">11</option>','<option value="12">12</option>','<option value="13">13</option>','<option value="14">14</option>','<option value="15">15</option>','<option value="16">16</option>','<option value="17">17</option>','</select>','</div>','</div>','</div>','</div>','</div>','</div>','</div>');var defaultSuggest=[];defaultSuggest.push('<div class="suggest-group  suggest-group-first" style="user-select: none;">',selected_lang_template.regions,'</div>','<div class="ac-row suggest-rowwrap ac-active" id=":6h" role="option" style="user-select: none;">','<div class="suggest-row" style="user-select: none;">','<div class="suggest-name suggest-name-city" style="user-select: none;" id="',selSugTemplate.ids[0],'">',selSugTemplate.names[0],'</div>','</div>','</div>','<div class="ac-row suggest-rowwrap ac-active" id=":6h" role="option" style="user-select: none;">','<div class="suggest-row" style="user-select: none;">','<div class="suggest-name suggest-name-city" style="user-select: none;" id="',selSugTemplate.ids[1],'">',selSugTemplate.names[1],'</div>','</div>','</div>','<div class="ac-row suggest-rowwrap ac-active" id=":6h" role="option" style="user-select: none;">','<div class="suggest-row" style="user-select: none;">','<div class="suggest-name suggest-name-city" style="user-select: none;" id="',selSugTemplate.ids[2],'">',selSugTemplate.names[2],'</div>','</div>','</div>','<div class="ac-row suggest-rowwrap ac-active" id=":6h" role="option" style="user-select: none;">','<div class="suggest-row" style="user-select: none;">','<div class="suggest-name suggest-name-city" style="user-select: none;" id="',selSugTemplate.ids[3],'">',selSugTemplate.names[3],'</div>','</div>','</div>','<div class="ac-row suggest-rowwrap ac-active" id=":6h" role="option" style="user-select: none;">','<div class="suggest-row" style="user-select: none;">','<div class="suggest-name suggest-name-city" style="user-select: none;" id="',selSugTemplate.ids[4],'">',selSugTemplate.names[4],'</div>','</div>','</div>','<div class="ac-row suggest-rowwrap ac-active" id=":6h" role="option" style="user-select: none;">','<div class="suggest-row" style="user-select: none;">','<div class="suggest-name suggest-name-city" style="user-select: none;" id="',selSugTemplate.ids[5],'">',selSugTemplate.names[5],'</div>','</div>','</div>','<div class="ac-row suggest-rowwrap ac-active" id=":6h" role="option" style="user-select: none;">','<div class="suggest-row" style="user-select: none;">','<div class="suggest-name suggest-name-district" style="user-select: none;" id="',selSugTemplate.ids[6],'">',selSugTemplate.names[6],'</div>','</div>','</div>','<div class="ac-row suggest-rowwrap ac-active" id=":6h" role="option" style="user-select: none;">','<div class="suggest-row" style="user-select: none;">','<div class="suggest-name suggest-name-city" style="user-select: none;" id="',selSugTemplate.ids[7],'">',selSugTemplate.names[7],'</div>','</div>','</div>');if(window.moment===undefined||window.moment.version.split(".")[0]!=='2'){if(window.etgLibraries.momentPending){const script_tag=document.getElementsByClassName('zen-ostr-moment');script_tag[0].addEventListener('load',jquery_check);}else{const script_tag=document.createElement('script');script_tag.setAttribute('type','text/javascript');script_tag.setAttribute('class','zen-ostr-moment');script_tag.setAttribute('src',etgwidget.host+'/static/libraries/moment.min.js');head.appendChild(script_tag);script_tag.onload=function(){console.log("moment.js loaded");window.etgLibraries.momentPending=false;jquery_check();};window.etgLibraries.momentPending=true;}}else{moment=window.moment||window.etgLibraries.moment;window.etgLibraries.moment=moment;jquery_check();}
function jquery_check(){var jqueryOnPage;try{jqueryOnPage=window.jQuery.fn.jquery;}
catch(e){}
if((window.jQuery===undefined||jqueryOnPage!=='3.3.1')&&!window.etgLibraries.jQuery){if(window.etgLibraries.jQueryPending){const script_tag=document.getElementsByClassName('zen-ostr-jquery');script_tag[0].addEventListener('load',scriptLoadHandler);}else{const script_tag=document.createElement('script');script_tag.setAttribute('type','text/javascript');script_tag.setAttribute('class','zen-ostr-jquery');script_tag.setAttribute('src',etgwidget.host+'/static/libraries/jquery.min.js');script_tag.onload=scriptLoadHandler;head.appendChild(script_tag);window.etgLibraries.jQueryPending=true;}}else{jQuery=window.jQuery||window.etgLibraries.jQuery;window.etgLibraries.jQuery=jQuery;main();}}
function scriptLoadHandler(){try{jQuery=window.jQuery.noConflict(true);window.etgLibraries.jQuery=jQuery;}catch(e){jQuery=window.etgLibraries.jQuery;}
main();}
function main(){window.etgLibraries.moment=window.moment;jQuery(document).ready(function($){const rootElement=$("<div class='ostrovok-div' style='display:none'></div>");const rootPopup=$("<div class='ostrovok-popup'></div>");const template=$("<div class='ostrovok-popup-template'></div>");const suggest=$("<div class='suggest' role='listbox' id=':2' aria-expanded='true' style='display: none !important;'></div>");const zenGuestsPopup=$("<div class='ostrovok-guests-popup'></div>");$('body').append(rootPopup);rootPopup.append(suggest);rootPopup.append(template);rootPopup.append(zenGuestsPopup);rootElement.insertBefore(rootScript);rootElement.html(html_template.join(''));template.html(popupTemplate.join(''));if(etgConfig.brand==='zenhotels'){rootElement.find('.zen-homepage-searchform-submit-button').addClass('zen-homepage-searchform-button-zen');template.find('.zen-guests-close-button').addClass('zen-homepage-searchform-button-zen');}
function colorValidate(c){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(c)}
if(colorValidate(etgConfig.button_color)){rootElement.find('.zen-homepage-searchform-submit-button').addClass('zen-button-custom');rootPopup.find('.zen-guests-close-button').addClass('zen-button-custom');etgwidget.buttonCSS+='background:'+etgConfig.button_color+'!important;'}
else{etgConfig.button_color=false;}
if(colorValidate(etgConfig.button_text_color)){etgwidget.buttonCSS+='color:'+etgConfig.button_text_color+'!important;';}
if(colorValidate(etgConfig.text_color)){rootElement.find('.zen-tabs').css('cssText','color:'+etgConfig.text_color+'!important;');rootPopup.css('cssText','color:'+etgConfig.text_color+'!important;');}
rootElement.find('.zen-homepage-searchform-submit-button').css('cssText',etgwidget.buttonCSS);rootPopup.find('.zen-guests-close-button').css('cssText',etgwidget.buttonCSS);if(colorValidate(etgConfig.color)){etgwidget.formCSS+='background:'+etgConfig.color+'!important;';}
if(rootElement.find('.zen-tabs')){var jqueryVersion;try{jqueryVersion=window.jQuery.fn.jquery;}
catch(e){jqueryVersion='';}
finally{$.ajax({type:'POST',url:etgwidget.host+'/register_event/',data:{event_type:'show',widget_hash:etgwidget.hash,jquery:Boolean(window.jQuery),jquery_version:jqueryVersion}});}}
if(etgConfig.margin){etgwidget.margin=5;etgwidget.containerCSS+='margin:'+String(etgwidget.margin)+'px!important;';}
if(!isNaN(parseInt(etgConfig.width))){if(parseInt(etgConfig.width)<=100){etgwidget.div_width=parseInt(rootElement.parent().css('width'))*parseInt(etgConfig.width)/100-etgwidget.margin*2;etgwidget.containerCSS+='width:calc('+String(parseInt(etgConfig.width))+'% - '+String(etgwidget.margin*2)+'px)!important;';}
else{etgwidget.div_width=parseInt(etgConfig.width)-etgwidget.margin*2;etgwidget.containerCSS+='width:'+String(etgwidget.div_width)+'px!important;';}}
else{etgwidget.div_width=parseInt(rootElement.parent().css('width'))-etgwidget.margin*2;}
if(etgConfig.logo){rootElement.find('.zen-tabs-logo').css('cssText','display:flex!important;');if(etgConfig.brand==='zenhotels'){rootElement.find('.zen-tabs-logo-image').addClass('zen-img');}else{if(etgConfig.lang==='ru'){rootElement.find('.zen-tabs-logo-image').addClass('ost-img-ru');}else{rootElement.find('.zen-tabs-logo-image').addClass('ost-img-en');}}
rootElement.find('.zen-tabs-logo-image').css('cssText','display:block!important;');}
rootElement.css('cssText',etgwidget.containerCSS);etgwidget.closePopup=function(){rootElement.find('.zen-guestsbutton-button').removeClass('zen-guestsbutton-button-is-active');zenGuestsPopup.find('.zen-guestsbutton-popup').remove();};function date_addtext(short){if(short){try{rootElement.find('.zen-daterange-from .zen-daterange-date-value').text(etgwidget.date_1txt.split(' ')[0]+' '+etgwidget.date_1txt.split(' ')[1].slice(0,3));rootElement.find('.zen-daterange-to .zen-daterange-date-value').text(etgwidget.date_2txt.split(' ')[0]+' '+etgwidget.date_2txt.split(' ')[1].slice(0,3));etgwidget.short_month=true;}catch(err){rootElement.find('.zen-daterange-from .zen-daterange-date-value').text(etgwidget.date_1txt);rootElement.find('.zen-daterange-to .zen-daterange-date-value').text(etgwidget.date_2txt);etgwidget.short_month=false;}}else{rootElement.find('.zen-daterange-from .zen-daterange-date-value').text(etgwidget.date_1txt);rootElement.find('.zen-daterange-to .zen-daterange-date-value').text(etgwidget.date_2txt);etgwidget.short_month=false;}}
function check_zen_tabs_width(){if(etgwidget.div_width<286){rootElement.find('.zen-homepage-searchform-guests').css('cssText','padding-top:10px!important;');rootElement.find('.zen-homepage-searchform-criteria').css('cssText','display:block!important;');rootElement.find('.zen-daterange').css('cssText','width:100%!important;');}else{rootElement.find('.zen-homepage-searchform-criteria').css('cssText','');rootElement.find('.zen-homepage-searchform-guests').css('cssText','');rootElement.find('.zen-daterange').css('cssText','');}
if(etgwidget.div_width<380&&!etgwidget.short_month){date_addtext(true);}else if(etgwidget.div_width>379&&etgwidget.short_month){date_addtext(false);}
if(etgwidget.div_width<=680){rootElement.find('.zen-homepage-searchform .zen-destination-input').css('cssText','padding-left: 10px !important;');rootElement.find('.zen-destination-label').css('cssText','left: 10px !important;');rootElement.find('.zen-daterange-date').css('cssText','');rootElement.find('.zen-guestsbutton-button').css('cssText','padding: 0 5px !important;width: auto !important;');rootElement.find('.zen-guests').css('cssText','width: 100% !important;');rootElement.find('.zen-homepage-searchform-submit-wrapper').css('cssText','padding-top: 10px !important;');rootElement.find('.zen-logo-text').css('cssText','display:none !important;');}else{rootElement.find('.zen-destination-label').css('cssText','left: ;');rootElement.find('.zen-guests').css('cssText','width: ;');rootElement.find('.zen-homepage-searchform-submit-wrapper').css('cssText','');rootElement.find('.zen-logo-text').css('cssText','');}
if(etgwidget.div_width<286){rootElement.find('.zen-guestsbutton-button').css('cssText','padding: 0px 10px !important;width: auto !important;');rootElement.find('.zen-homepage-searchform .zen-destination-input').css('cssText','font-size:14px!important;padding-left: 10px !important;');}
if(etgwidget.div_width>680){rootElement.find('.zen-homepage-searchform-fractions').css('cssText','display: flex !important;justify-content: space-between !important;');rootElement.find('.zen-homepage-searchform-criteria').css('cssText','flex-grow: 1 !important;margin-right: 20px !important;');rootElement.find('.zen-select-native').css('cssText','font-size: 16px !important;font-size: 16px !important;');}else if(etgwidget.div_width<681&&etgwidget.div_width<286){rootElement.find('.zen-homepage-searchform-criteria').css('cssText','display:block!important;');rootElement.find('.zen-homepage-searchform-fractions').css('cssText','');}else{rootElement.find('.zen-homepage-searchform-fractions').css('cssText','justify-content: ;');rootElement.find('.zen-homepage-searchform-criteria').css('cssText','flex-grow: ;');rootElement.find('.zen-select-native').css('cssText','font-size: ;');}
if(etgwidget.div_width>954){rootElement.find('.zen-homepage-searchform .zen-guestsbutton-button-guests').css('cssText','font-size: 18px !important;');rootElement.find('.zen-homepage-searchform .zen-daterange-date-value').css('cssText','font-size: 18px !important;');}else{rootElement.find('.zen-homepage-searchform .zen-guestsbutton-button-guests').css('cssText','font-size: ;');rootElement.find('.zen-homepage-searchform .zen-daterange-date-value').css('cssText','font-size: ;');}
if(etgwidget.div_width>954&&etgwidget.div_width<=1074){rootElement.find('.zen-daterange-date-value').css('cssText','font-size: 18px !important;');rootElement.find('.zen-daterange-date').css('cssText','padding-left: 15px !important;');rootElement.find('.zen-guestsbutton-button-guests').css('cssText','font-size: 18px !important;');rootElement.find('.zen-guestsbutton-button').css('cssText','padding-left: 15px !important;');rootElement.find('.zen-tabs-body').css('cssText','padding: 20px 30px !important;'+etgwidget.formCSS);rootElement.find('.zen-homepage-searchform-guests').css('cssText','flex-grow:1.7!important;');}else if(etgwidget.div_width>680&&etgwidget.div_width<=1074){rootElement.find('.zen-tabs-body').css('cssText','padding: 20px 30px !important;'+etgwidget.formCSS);rootElement.find('.zen-daterange-date').css('cssText','padding-left: 15px !important;');rootElement.find('.zen-guestsbutton-button').css('cssText','padding-left: 15px !important;');rootElement.find('.zen-homepage-searchform .zen-destination-input').css('cssText','');}else{rootElement.find('.zen-tabs-body').css('cssText',etgwidget.formCSS);}
if(etgwidget.div_width>1074){rootElement.find('.zen-tabs-body').css('cssText','padding: 13px 30px 5px !important;'+etgwidget.formCSS);rootElement.find('.zen-homepage-searchform-destination').css('cssText','margin-right: 15px !important;width: 350px !important;');rootElement.find('.zen-homepage-searchform .zen-destination-input').css('cssText','font-size: 18px !important;');rootElement.find('.zen-homepage-searchform-primary').css('cssText','display: flex !important;justify-content: space-between !important;');rootElement.find('.zen-homepage-searchform-fractions').css('cssText','flex-grow: 1 !important;display: flex !important;justify-content: space-between !important;');rootElement.find('.zen-daterange-date').css('cssText','padding-left: 19px !important;');rootElement.find('.zen-guestsbutton-button').css('cssText','padding-left: 19px !important;');}else{rootElement.find('.zen-homepage-searchform-destination').css('cssText',' ;');rootElement.find('.zen-homepage-searchform-primary').css('cssText','display: ;');}}
var suggestPopupCSS;var guestsPopupCSS;function setPopupPosition(){const inputPositionTop=rootElement.find('.zen-destination-input-wrapper').offset().top+44;const inputPositionLeft=rootElement.find('.zen-destination-input-wrapper').offset().left;const inputWidth=rootElement.find('.zen-destination-input-wrapper').css('width');const guestsTop=rootElement.find('.zen-guestsbutton-control').offset().top+44;var guestsLeft=rootElement.find('.zen-guestsbutton-control').offset().left-207;if(guestsLeft<-10){guestsLeft=-10;}
guestsPopupCSS='top:'+guestsTop+'px!important;left:'+guestsLeft+'px!important;';suggestPopupCSS='top:'+inputPositionTop+'px!important;left:'+inputPositionLeft+'px!important;width:'+inputWidth+'!important;';}
check_zen_tabs_width();if(etgConfig.region_id){rootElement.find('.zen-destination-input').val(etgConfig.region_name);}
$(window).resize(function(){etgwidget.closePopup();rootPopup.find('.suggest').css('cssText','display: none !important;');if(rootElement.find('.zen-daterange-date').hasClass('zen-daterange-date-is-active')){rootElement.find('.zen-daterange-date').removeClass('zen-daterange-date-is-active');rootElement.find('.zen-daterange-from').data('dateRangePicker').close();}});const popup=template.find('.zen-guestsbutton-popup');const guestsAges=template.find('.zen-guests-ages');const appendChildrenAges=function(selectParent,size,guests){const selectAge=guestsAges.find('.zen-guests-age').first().clone();selectParent.html('');for(var i=0;i<size;i++){const nodeElem=selectAge.clone();const nodeElemSelect=nodeElem.find('.zen-select-native');const nodeElemLabel=nodeElem.find('.zen-select-label');nodeElem.attr('data-value',i);nodeElemSelect.val(guests['guestChild'+i]);nodeElemLabel.text(guests['guestChild'+i]);selectParent.append(nodeElem);}
selectParent.change(function(e){const target=$(e.target);const parent=target.closest('.zen-guests-age');const data=parent.attr('data-value');const labelTarget=parent.find('.zen-select-label');const value=target.val();labelTarget.text(value);guests['guestChild'+data]=value;});};etgwidget.guestsbuttonPopup=function(flag,button){const popupElement=popup.clone();const selectLabels=popupElement.find('.zen-select-label');const selectsSize=popupElement.find('.zen-select-native');const popupButtonClose=popupElement.find('.zen-guests-close-button');const roomGroup=popupElement.find('.zen-guests-room-group');const zenGuestsbutton=rootElement.find('.zen-guestsbutton');const allPopupGuestsLabel=button.find('.zen-guestsbutton-button-guests');if(flag){etgwidget.closePopup();return;}
selectLabels.eq(0).text(etgwidget.guests.guestAdult);selectLabels.eq(1).text(etgwidget.guests.guestChildrenAll);var selectValueAdult=etgwidget.guests.guestAdult;selectsSize.eq(0).val(selectValueAdult);selectsSize.eq(1).val(etgwidget.guests.guestChildrenAll);if(etgwidget.guests.guestChildrenAll>0){roomGroup.append(guestsAges);roomGroup.addClass('zen-guests-is-active');const roomFieldParent=guestsAges.find('.zen-guests-room-field');appendChildrenAges(roomFieldParent,etgwidget.guests.guestChildrenAll,etgwidget.guests);}
popupElement.css('cssText',guestsPopupCSS);zenGuestsPopup.append(popupElement);zenGuestsPopup.find('.zen-guests-ages-title').text(etgwidget.selected_lang_template.child_age+' '+etgwidget.date_2txt);popupButtonClose.on('click',function(){etgwidget.closePopup();});selectsSize.eq(0).on('change',function(evt){const target=evt.target;var size=target.value;selectLabels.eq(0).text(size);etgwidget.guests.guestAdult=size;var summ=parseInt(size)+parseInt(etgwidget.guests.guestChildrenAll);if(summ>1){etgwidget.guests.guestsAll=summ+' '+etgwidget.selected_lang_template.guests;}else{etgwidget.guests.guestsAll=summ+' '+etgwidget.selected_lang_template.guest;}
allPopupGuestsLabel.text(etgwidget.guests.guestsAll);});selectsSize.eq(1).on('change',function(evt){const target=evt.target;const size=target.value;selectLabels.eq(1).text(size);etgwidget.guests.guestChildrenAll=size;var summ=parseInt(size)+parseInt(etgwidget.guests.guestAdult);if(summ>1){etgwidget.guests.guestsAll=summ+' '+etgwidget.selected_lang_template.guests;}else{etgwidget.guests.guestsAll=summ+' '+etgwidget.selected_lang_template.guest;}
allPopupGuestsLabel.text(etgwidget.guests.guestsAll);if(size>0&&!roomGroup.hasClass('zen-guests-is-active')){roomGroup.append(guestsAges);roomGroup.addClass('zen-guests-is-active');zenGuestsPopup.find('.zen-guests-ages-title').text(etgwidget.selected_lang_template.child_age+' '+etgwidget.date_2txt);}
const guestsAgeInPopup=zenGuestsPopup.find('.zen-guests-ages');const selectParent=guestsAgeInPopup.find('.zen-guests-room-field');if(guestsAgeInPopup){if(size>0&&size<=4){appendChildrenAges(selectParent,size,etgwidget.guests);}else{guestsAgeInPopup.remove();roomGroup.removeClass('zen-guests-is-active');}}});};const guestsButtonControl=rootElement.find('.zen-guestsbutton-control');const guestsButton=rootElement.find('.zen-guestsbutton-button');guestsButtonControl.on('click',function(){if(guestsButton.hasClass('zen-guestsbutton-button-is-active')){etgwidget.guestsbuttonPopup(true,guestsButton);return;}
setPopupPosition();guestsButton.addClass('zen-guestsbutton-button-is-active');etgwidget.guestsbuttonPopup(false,guestsButton);});etgwidget.setDateVal=function(startdate,enddate){startdate=startdate===undefined?etgwidget.date1:startdate;enddate=enddate===undefined?etgwidget.date2:enddate;rootElement.find('.zen-daterange-from').val(startdate.format('YYYY-MM-DD')+' to '+enddate.format('YYYY-MM-DD'));}
$(document).on('click',function(evt){const target=evt.target;const popup=zenGuestsPopup.find('.zen-guestsbutton-popup');const input=rootElement.find('.zen-destination-field');const inputWrapper=rootPopup.find('.suggest');const itsInput=target==input||input.find(target).length;const dateRange=rootElement.find('.zen-daterange');const itsDatepicker=target==dateRange||dateRange.find(target).length;const dateIsFrom=dateRange.find('.zen-daterange-date-is-from');const dateIsTo=dateRange.find('.zen-daterange-date-is-to');if(itsDatepicker){if(target==dateIsFrom[0]||dateIsFrom.find(target).length){dateIsFrom.addClass('zen-daterange-date-is-active');dateIsTo.removeClass('zen-daterange-date-is-active');if(etgwidget.datepickerSeconddate){dateRange.find('.zen-daterange-from').data('dateRangePicker').clear();dateRange.find('.zen-daterange-from').data('dateRangePicker').resetMonthsView();etgwidget.setDateVal();}
if(etgwidget.datepickerFirstdate){dateRange.find('.zen-daterange-from').data('dateRangePicker').clear();dateRange.find('.zen-daterange-from').data('dateRangePicker').resetMonthsView();etgwidget.setDateVal();}}}
else{dateIsFrom.removeClass('zen-daterange-date-is-active');dateIsTo.removeClass('zen-daterange-date-is-active');}
if(!popup.length&&inputWrapper.css('display')==='none'&&!itsInput){return;}
const itsPopup=target==popup||popup.find(target).length;const itsButton=target==guestsButtonControl||guestsButtonControl.find(target).length;if(itsInput&&inputWrapper.css('display')==='none'){setPopupPosition();inputWrapper.css('cssText','display:block!important;'+suggestPopupCSS);}else if(!itsInput&&inputWrapper.css('display')!='none'){inputWrapper.css('cssText','display:none!important;');}
if(!itsPopup&&guestsButton.hasClass('zen-guestsbutton-button-is-active')&&!itsButton){etgwidget.closePopup();}});rootPopup.find('.suggest').html(defaultSuggest.join(''));if(!window.etgLibraries.datePicker){if(window.etgLibraries.datePickerPending){const script_tag=document.getElementsByClassName('zen-ostr-datepicker');script_tag[0].addEventListener('load',datePickerReady);}
else{const script_tag=document.createElement('script');script_tag.setAttribute('type','text/javascript');script_tag.setAttribute('class','zen-ostr-datepicker');script_tag.setAttribute('src',etgwidget.host+'/static/libraries/dp_rs.js');script_tag.onload=datePickerReady;head.appendChild(script_tag);window.etgLibraries.datePickerPending=true;}}
else{datePickerReady();}
function datePickerReady(){var $=jQuery=etgLibraries.jQuery;var moment=etgLibraries.moment;window.etgLibraries.datePicker=true;var monthes=[];if(etgConfig.lang=='ru'){monthes=['января','февраля','марта','апреля','мая','июня','июля','августа','сентября','октября','ноября','декабря'];}else{try{monthes=$.dateRangePickerLanguages[etgConfig.lang]['month-name'];}catch(err){monthes=$.dateRangePickerLanguages.default['month-name'];}}
function date_setup(startdate,enddate){if(startdate.endOf('day')>=enddate.endOf('day')){enddate=moment(startdate).add(1,'days')}
else{var diff=enddate.diff(startdate,'days');if(diff>30){enddate=moment(startdate).add(30,'days');}}
date1=startdate.format('DD.MM.YYYY');etgwidget.date_1txt=startdate.date()+' '+monthes[startdate.month()];date2=enddate.format('DD.MM.YYYY');etgwidget.date_2txt=enddate.date()+' '+monthes[enddate.month()];etgwidget.date1=startdate;etgwidget.date2=enddate;etgwidget.setDateVal();if(etgwidget.div_width<380){date_addtext(true);}else{date_addtext(false);}}
var date1;var date2;var region_id;var checkin;var
checkout;region_id=etgConfig.region_id;checkin=moment(etgConfig.checkin,'DD-MM');checkout=moment(etgConfig.checkout,'DD-MM');if(checkin.isValid()&&checkout.isValid()){if(checkin>checkout){var tmp=checkin;checkin=checkout;checkout=tmp;}else if(checkout.diff(checkin,'days')===0){checkout.add(1,'days');}
var diff=checkout.diff(checkin,'days');if(diff>30){checkout=moment(checkin).add(30,'days');}
if(checkin.diff(moment(),'days')<0){checkin.add(1,'years');checkout.add(1,'years');}}else{checkin=moment();checkout=moment();var days_to_add=6-checkin.isoWeekday();if(days_to_add>0){checkin.add(days_to_add,'days');checkout.add(days_to_add+1,'days');}else if(days_to_add==0){checkin.add(7,'days');checkout.add(8,'days');}else{checkin.add(6,'days');checkout.add(7,'days');}}
date_setup(checkin,checkout);function onDivResize(){etgwidget.div_width=parseInt(rootElement.find('.zen-tabs').css('width'));check_zen_tabs_width();etgwidget.closePopup();rootPopup.find('.suggest').css('cssText','display: none !important;');if(rootElement.find('.zen-daterange-date').hasClass('zen-daterange-date-is-active')){rootElement.find('.zen-daterange-date').removeClass('zen-daterange-date-is-active');rootElement.find('.zen-daterange-from').data('dateRangePicker').close();}}
if(rootElement.is(':visible')){onDivResize();new ResizeSensor(rootElement[0],onDivResize);}else{var timer=setInterval(function(){if(rootElement.is(':visible')){etgwidget.div_width=parseInt(rootElement.find('.zen-tabs').css('width'));check_zen_tabs_width();new ResizeSensor(rootElement[0],onDivResize);clearInterval(timer);}},5000);}
etgwidget.setDateVal(checkin,checkout);var globalTimeout=null;rootElement.find('.zen-destination-input').keyup(function(){if(globalTimeout!=null){clearTimeout(globalTimeout);}
globalTimeout=setTimeout(function(){globalTimeout=null;var css_text='display:block!important;';var query=rootElement.find('.zen-destination-input').val();console.log(query);if(!query){rootPopup.find('.suggest').css('cssText',css_text+suggestPopupCSS);rootPopup.find('.suggest').html(defaultSuggest.join(''));return;}
$.getJSON(etgwidget.host+'/site/multicomplete.json?query='+query+'&v=5&locale='+etgConfig.lang+'&decode=1',function(data){rootPopup.find('.suggest').css('cssText',css_text+suggestPopupCSS);rootPopup.find('.suggest').empty();if(data.regions.length!=0){rootPopup.find('.suggest').append('<div class="suggest-group  suggest-group-first" style="user-select: none;">'+etgwidget.selected_lang_template.regions+'</div>');data.regions.forEach(function(element){var reg_type;if(element.type=='City'||element.type=='Multi-City (Vicinity)'){reg_type='city';}else if(element.type=='Airport'){reg_type='airport';}else if(element.type=='Country'||element.type=='Multi-Region (within a country)'||element.type=='Province (State)'){reg_type='state';}else if(element.type=='Bus Station'){reg_type='bus-station';}else if(element.type=='Railway Station'){reg_type='railway-station';}else if(element.type=='Subway (Entrace)'){reg_type='metro';}else if(element.type=='Neighborhood'){reg_type='district';}else if(element.type=='Street'){reg_type='street';}else if(element.type=='Point of Interest'){reg_type='universal-poi';}
var txt='<div class="ac-row suggest-rowwrap ac-active" id=":6h" role="option" style="user-select: none;"><div class="suggest-row" style="user-select: none;"><div class="suggest-name suggest-name-'+reg_type+'" style="user-select: none;" id="'+element.id+'">'+element.name+', '+element.country+'</div></div></div>';rootPopup.find('.suggest').append(txt);});}
if(data.hotels.length!=0){rootPopup.find('.suggest').append('<div class="suggest-group  suggest-group-first" style="user-select: none;">'+etgwidget.selected_lang_template.hotels+'</div>');data.hotels.forEach(function(element){var hot_type;if(element.hotel_kind=='Villas_and_Bungalows'||element.hotel_kind=='Cottages_and_Houses'){hot_type='cottage';}else if(element.hotel_kind=='Camping'||element.hotel_kind=='Farm'){hot_type='camping';}else if(element.hotel_kind=='Castle'){hot_type='castle';}else{hot_type='hotel';}
var txt='<div class="ac-row suggest-rowwrap ac-active" id=":6h" role="option" style="user-select: none;"><div class="suggest-row" style="user-select: none;"><div class="suggest-name suggest-name-'+hot_type+'" style="user-select: none;" id="'+element.otahotel_id+'">'+element.hotel_name+' '+'<span class="suggest-notice" style="user-select: none;">'+element.region_name+'</span></div></div></div>';rootPopup.find('.suggest').append(txt);});}});},100);});rootPopup.find('.suggest').on('click','.suggest-name',function(event){event.stopPropagation();var text_value=$(this).text();region_id=$(this).attr('id');rootElement.find('.zen-destination-input').val(text_value);rootPopup.find('.suggest').css('cssText','display: none !important;');});const homeSite=etgConfig.brand==='zenhotels'?'zenhotels.com':'ostrovok.ru';const domain=window.location.hostname;const widget_type='search-widget';const fromParams=etgConfig.from||'cpa-v1-searchwidget|'+domain+'|'+etgwidget.hash;function makePartnerLinkWithRedirect(redirect,partnerlink,partners){var result=false;var partnerlinkUrl=new URL(partnerlink);for(var key in partners){if(partnerlinkUrl.hostname===partners[key]['hostname']){if(partners[key]['deeplink_location']==='path'){partnerlinkUrl.pathname=partnerlinkUrl.pathname.replace(new RegExp(partners[key]['path_regex']),partners[key]['deeplink_path']+encodeURIComponent(redirect));result=partnerlinkUrl;break;}
else if(partners[key]['deeplink_location']==='query'){partnerlinkUrl.searchParams.set(partners[key]['parameter_name'],redirect);result=partnerlinkUrl;break;}}}
return result;}
function makeRegionLink(){if(etgConfig.deeplink){var partnerlinkUrl=new URL(etgConfig.deeplink);for(var key in PARTNERS){if(partnerlinkUrl.hostname===PARTNERS[key]['hostname']){if(('hotel_redirect_url_prefix'in PARTNERS[key])&&PARTNERS[key]['hotel_redirect_url_prefix']){return PARTNERS[key]['hotel_redirect_url_prefix']+'hotels/';}}}}
return'hotels/';}
function makeHotelLink(){if(etgConfig.deeplink){var partnerlinkUrl=new URL(etgConfig.deeplink);for(var key in PARTNERS){if(partnerlinkUrl.hostname===PARTNERS[key]['hostname']){if(('hotel_redirect_url_prefix'in PARTNERS[key])&&PARTNERS[key]['hotel_redirect_url_prefix']){return PARTNERS[key]['hotel_redirect_url_prefix']+'rooms/';}}}}
return'rooms/';}
rootElement.find('.zen-homepage-searchform-submit-button').click(function(){var guestChildrens='';var child_count=parseInt(etgwidget.guests.guestChildrenAll);for(var i=0;i<child_count;i++){if(i==0){guestChildrens+='and';}
guestChildrens+=etgwidget.guests['guestChild'+i];guestChildrens+='.';}
guestChildrens=guestChildrens.slice(0,-1);const queryParams={'dates':date1+'-'+date2,'guests':etgwidget.guests.guestAdult+guestChildrens,'lang':etgConfig.lang,'from':fromParams}
const defaultTags={"utm_campaign":widget_type,"utm_content":domain,"utm_medium":"cpa","utm_source":"138441.affiliate.4763","partner_slug":"138441.affiliate.4763"}
for(p in etgConfig){if(p.substring(0,4)==='utm_'){defaultTags[p]=etgConfig[p];}}
var redirectUrl=new URL('https://'+homeSite);if(isNaN(region_id)){redirectUrl.pathname=makeHotelLink()+region_id;}
else if(region_id){queryParams['q']=region_id;redirectUrl.pathname=makeRegionLink();}
Object.keys(queryParams).forEach(function(key){redirectUrl.searchParams.set(key,queryParams[key])})
if(etgConfig.deeplink){processedLink=makePartnerLinkWithRedirect(redirectUrl.href,etgConfig.deeplink,PARTNERS);if(processedLink){redirectUrl=processedLink;}}
else{Object.keys(defaultTags).forEach(function(key){redirectUrl.searchParams.set(key,defaultTags[key])})}
var win=window.open(redirectUrl.href,'_blank');if(win){win.focus();$.ajax({type:'POST',url:etgwidget.host+'/register_event/',data:{event_type:'click',redirect_url:redirectUrl,widget_hash:etgwidget.hash,jquery:Boolean(window.jQuery)}});}else{alert('Please allow popups for this website');}});var holidays=[];$.getJSON(etgwidget.host+'/get_holidays/',function(data){holidays=data.holidays;});var config={language:etgConfig.lang,maxDays:31,minDays:2,duration:10,startOfWeek:'monday',hoveringTooltip:false,autoClose:true,selectForward:true,container:rootPopup,startDate:moment().format('YYYY-MM-DD'),singleMonth:true,customOpenAnimation:function(cb){$(this).fadeIn(30,cb);},endDate:moment(new Date()).add(364,'days').format('YYYY-MM-DD'),customArrowPrevSymbol:etgConfig.button_color?'<span class="prev-custom"></span>':etgConfig.brand==='zenhotels'?'<span class="prev-zen"></span>':'<span class="prev-ost"></span>',customArrowNextSymbol:etgConfig.button_color?'<span class="next-custom"></span>':etgConfig.brand==='zenhotels'?'<span class="next-zen"></span>':'<span class="next-ost"></span>',beforeShowDay:function(t){if(holidays.indexOf(moment(t).format('YYYY-MM-DD'))!=-1){return[true,'zen-holiday',''];}
return[true,'',''];}};rootElement.find('.zen-daterange-to').on('click',function(e){rootElement.find('.zen-daterange-from').data('dateRangePicker').open();rootElement.find('.zen-daterange-from').data('dateRangePicker').setStart(moment(date1,'DD.MM.YYYY').format('YYYY.MM.DD'));rootElement.find('.zen-daterange-to .zen-daterange-date').addClass('zen-daterange-date-is-active');rootElement.find('.zen-daterange-from .zen-daterange-date.zen-daterange-date-is-active').removeClass('zen-daterange-date-is-active');etgwidget.closePopup();rootPopup.find('.suggest').css('cssText','display:none!important;');etgwidget.datepickerSeconddate=true;e.stopPropagation();});$(document).ready(function(){rootElement.find('.zen-daterange-from').dateRangePicker(config).bind('datepicker-first-date-selected',function(event,obj){rootElement.find('.zen-daterange-from .zen-daterange-date.zen-daterange-date-is-active').removeClass('zen-daterange-date-is-active');rootElement.find('.zen-daterange-to .zen-daterange-date').addClass('zen-daterange-date-is-active');etgwidget.datepickerFirstdate=true;date_setup(moment(obj.date1),etgwidget.date2);}).bind('datepicker-change',function(event,obj){date_setup(moment(obj.date1),moment(obj.date2));rootElement.find('.zen-daterange-date.zen-daterange-date-is-active').removeClass('zen-daterange-date-is-active');}).bind('datepicker-closed',function(){etgwidget.datepickerSeconddate=false;etgwidget.datepickerFirstdate=false;});if(colorValidate(etgConfig.button_color)){rootPopup.find('.next-custom').css('cssText','border-left-color:'+etgConfig.button_color+'!important;border-top-color:'+etgConfig.button_color+'!important');rootPopup.find('.prev-custom').css('cssText','border-left-color:'+etgConfig.button_color+'!important;border-top-color:'+etgConfig.button_color+'!important');}});}});}}());